-- Programa: LKz PAINEL
-- Cor Base: Azul
-- Efeito: Glow, Bloom, RGB
-- made by KIEFER & LIPZ
-- ARSENAL TEAM CHECK: mira s√≥ em inimigos.


local Players = game:GetService('Players')
local Teams = game:GetService('Teams')
local UIS = game:GetService('UserInputService')
local RunService = game:GetService('RunService')
local TweenService = game:GetService('TweenService')
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()


local corPrincipal = Color3.fromRGB(80,120,220)


-- GUI Setup
local screenGui = Instance.new('ScreenGui')
screenGui.Name = 'LKz PAINEL_GUI'
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = LocalPlayer:WaitForChild('PlayerGui')


local mainFrame = Instance.new('Frame')
mainFrame.AnchorPoint = Vector2.new(0.5,0.5)
mainFrame.Position = UDim2.new(0.5,0,0.5,0)
mainFrame.Size = UDim2.new(0,380,0,340)
mainFrame.BackgroundColor3 = Color3.fromRGB(18,18,24)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ClipsDescendants = true
mainFrame.ZIndex = 2
mainFrame.Parent = screenGui
Instance.new('UICorner', mainFrame).CornerRadius = UDim.new(0,10)


-- Sombreamento
local shadow = Instance.new('ImageLabel')
shadow.AnchorPoint = Vector2.new(0.5,0.5)
shadow.Position = UDim2.new(0.5,0,0.5,4)
shadow.Size = UDim2.new(1,26,1,26)
shadow.BackgroundTransparency = 1
shadow.Image = 'rbxassetid://5554236805'
shadow.ImageColor3 = Color3.fromRGB(0,0,0)
shadow.ImageTransparency = 0.35
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(23,23,277,277)
shadow.ZIndex = 1
shadow.Parent = mainFrame


-- TopBar Custom
local topBar = Instance.new('Frame')
topBar.Size = UDim2.new(1,0,0,42)
topBar.Position = UDim2.new(0,0,0,0)
topBar.BackgroundColor3 = corPrincipal
topBar.BorderSizePixel = 0
topBar.ZIndex = 3
topBar.Parent = mainFrame
Instance.new('UICorner', topBar).CornerRadius = UDim.new(0,10)
local topGrad = Instance.new('UIGradient')
topGrad.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,corPrincipal),ColorSequenceKeypoint.new(1,Color3.fromRGB(40,40,70))})
topGrad.Rotation = 15
topGrad.Parent = topBar


local title = Instance.new('TextLabel')
title.BackgroundTransparency = 1
title.Position = UDim2.new(0,10,0,4)
title.Size = UDim2.new(1,-100,0,20)
title.Font = Enum.Font.GothamBold
title.Text = 'LKz PAINEL'
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.ZIndex = 4
title.Parent = topBar


local madeBy = Instance.new('TextLabel')
madeBy.BackgroundTransparency = 1
madeBy.Position = UDim2.new(0,10,0,22)
madeBy.Size = UDim2.new(1,-100,0,16)
madeBy.Font = Enum.Font.Gotham
madeBy.Text = 'made by KIEFER & LIPZ'
madeBy.TextColor3 = Color3.fromRGB(220,220,220)
madeBy.TextSize = 13
madeBy.TextXAlignment = Enum.TextXAlignment.Left
madeBy.ZIndex = 4
madeBy.Parent = topBar


-- Minimizar/Fechar
local isMinimized = false
local minimizeBtn = Instance.new('TextButton')
minimizeBtn.AnchorPoint = Vector2.new(1,0.5)
minimizeBtn.Position = UDim2.new(1,-50,0.5,0)
minimizeBtn.Size = UDim2.new(0,26,0,26)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(50,100,200)
minimizeBtn.Text = '‚àí'
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 18
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.AutoButtonColor = false
minimizeBtn.ZIndex = 4
minimizeBtn.Parent = topBar
Instance.new('UICorner', minimizeBtn).CornerRadius = UDim.new(1,0)


local closeBtn = Instance.new('TextButton')
closeBtn.AnchorPoint = Vector2.new(1,0.5)
closeBtn.Position = UDim2.new(1,-10,0.5,0)
closeBtn.Size = UDim2.new(0,26,0,26)
closeBtn.BackgroundColor3 = Color3.fromRGB(220,60,60)
closeBtn.Text = 'X'
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 14
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.AutoButtonColor = false
closeBtn.ZIndex = 4
closeBtn.Parent = topBar
Instance.new('UICorner', closeBtn).CornerRadius = UDim.new(1,0)


minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    mainFrame.Size = UDim2.new(0,380,0,isMinimized and 42 or 340)
    minimizeBtn.Text = isMinimized and '‚ñ°' or '‚àí'
end)
closeBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)


local minimizeHotkey = Enum.KeyCode.K
UIS.InputBegan:Connect(function(input,gp)
    if gp then return end
    if input.KeyCode == minimizeHotkey then
        isMinimized = not isMinimized
        mainFrame.Size = UDim2.new(0,380,0,isMinimized and 42 or 340)
        minimizeBtn.Text = isMinimized and '‚ñ°' or '‚àí'
    end
end)


local glow = Instance.new('UIStroke')
glow.Color = corPrincipal
glow.Thickness = 2
glow.Transparency = 0.35
glow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
glow.Parent = mainFrame


-- Abas/Se√ß√µes
local function createTabSection(name, size, position, bgColor, zIndex, parent)
    local frame = Instance.new('Frame')
    frame.Name = name
    frame.Size = size or UDim2.new(0,90,1,-42)
    frame.Position = position or UDim2.new(0,0,0,42)
    frame.BackgroundColor3 = bgColor
    frame.BorderSizePixel = 0
    frame.ZIndex = zIndex or 2
    frame.Parent = parent
    Instance.new('UICorner', frame).CornerRadius = UDim.new(0,10)
    return frame
end
local sideTabs = createTabSection("SideTabs", UDim2.new(0,90,1,-42), UDim2.new(0,0,0,42), Color3.fromRGB(15,15,22), 2, mainFrame)
local sideList = Instance.new('UIListLayout'); sideList.FillDirection = Enum.FillDirection.Vertical; sideList.HorizontalAlignment = Enum.HorizontalAlignment.Center; sideList.VerticalAlignment = Enum.VerticalAlignment.Top; sideList.Padding = UDim.new(0,6); sideList.Parent = sideTabs
Instance.new('UIPadding', sideTabs).PaddingTop = UDim.new(0,8)


local contentHolder = createTabSection("ContentHolder", UDim2.new(1,-105,1,-56), UDim2.new(0,95,0,46), Color3.fromRGB(14,14,20), 2, mainFrame)
Instance.new('UICorner', contentHolder).CornerRadius = UDim.new(0,10)


local function createScrollPage(name)
    local sf = Instance.new('ScrollingFrame')
    sf.Name = name
    sf.Size = UDim2.new(1,-10,1,-10)
    sf.Position = UDim2.new(0,5,0,5)
    sf.BackgroundTransparency = 1
    sf.BorderSizePixel = 0
    sf.ScrollBarThickness = 3
    sf.ScrollBarImageColor3 = corPrincipal
    sf.CanvasSize = UDim2.new(0,0,0,0)
    sf.AutomaticCanvasSize = Enum.AutomaticSize.Y
    sf.Visible = false
    sf.ZIndex = 3
    sf.Parent = contentHolder
    local layout = Instance.new('UIListLayout'); layout.FillDirection = Enum.FillDirection.Vertical; layout.Padding = UDim.new(0,6); layout.HorizontalAlignment = Enum.HorizontalAlignment.Center; layout.SortOrder = Enum.SortOrder.LayoutOrder; layout.Parent = sf
    local pad = Instance.new('UIPadding'); pad.PaddingTop = UDim.new(0,6); pad.PaddingBottom = UDim.new(0,6); pad.Parent = sf
    return sf
end
local pageCombat = createScrollPage('Combat')
local pageVisual = createScrollPage('Visual')
local pageMisc = createScrollPage('Misc')
local pageClickRage = createScrollPage('ClickRage')
pageCombat.Visible = true
local currentPage = pageCombat


local function createTab(text, page)
    local tab = Instance.new('TextButton')
    tab.Size = UDim2.new(1,-12,0,30)
    tab.BackgroundColor3 = Color3.fromRGB(22,22,30)
    tab.TextColor3 = Color3.fromRGB(230,230,230)
    tab.Font = Enum.Font.GothamSemibold
    tab.TextSize = 14
    tab.Text = text
    tab.AutoButtonColor = false
    tab.ZIndex = 3
    tab.Parent = sideTabs
    local c = Instance.new('UICorner', tab); c.CornerRadius = UDim.new(0,8)
    local stroke = Instance.new('UIStroke', tab); stroke.Color = corPrincipal; stroke.Thickness = 1.2; stroke.Transparency = 0.6
    local function setActive(state) tab.BackgroundColor3 = state and Color3.fromRGB(35,35,50) or Color3.fromRGB(22,22,30); tab.TextColor3 = state and Color3.fromRGB(255,255,255) or Color3.fromRGB(200,200,200) end
    setActive(page == currentPage)
    tab.MouseButton1Click:Connect(function()
        currentPage.Visible = false; currentPage = page; currentPage.Visible = true
        for _,child in ipairs(sideTabs:GetChildren()) do if child:IsA('TextButton') then child.BackgroundColor3 = Color3.fromRGB(22,22,30); child.TextColor3 = Color3.fromRGB(200,200,200) end end
        setActive(true)
    end)
    return tab
end


createTab('COMBAT', pageCombat)
createTab('VISUAL', pageVisual)
createTab('MISC', pageMisc)
createTab('CLICK RAGE', pageClickRage)


local function createModernButton(parentPage, text, order)
    local btn = Instance.new('TextButton')
    btn.Size = UDim2.new(0.96, 0, 0, 34)
    btn.BackgroundColor3 = Color3.fromRGB(32, 32, 45)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 14
    btn.Text = text
    btn.AutoButtonColor = false
    btn.LayoutOrder = order or 0
    btn.ZIndex = 4
    btn.Parent = parentPage


    local corner = Instance.new('UICorner')
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = btn


    local stroke = Instance.new('UIStroke')
    stroke.Color = corPrincipal
    stroke.Thickness = 1.2
    stroke.Transparency = 0.5
    stroke.Parent = btn


    local hoverTween = TweenService:Create(btn, TweenInfo.new(0.18, Enum.EasingStyle.Quart), {BackgroundColor3 = Color3.fromRGB(45, 45, 65)})
    local normalTween = TweenService:Create(btn, TweenInfo.new(0.18, Enum.EasingStyle.Quart), {BackgroundColor3 = Color3.fromRGB(32, 32, 45)})


    btn.MouseEnter:Connect(function() hoverTween:Play() end)
    btn.MouseLeave:Connect(function() normalTween:Play() end)


    return btn
end


-- SUB-BOT√ÉO (para as op√ß√µes expandidas)
local function createSubButton(parentPage, text, order)
    local btn = Instance.new('TextButton')
    btn.Size = UDim2.new(0.85, 0, 0, 28)
    btn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    btn.TextColor3 = Color3.fromRGB(200, 200, 200)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 12
    btn.Text = text
    btn.AutoButtonColor = false
    btn.LayoutOrder = order or 0
    btn.ZIndex = 4
    btn.Parent = parentPage
    btn.Visible = false


    local corner = Instance.new('UICorner')
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn


    local stroke = Instance.new('UIStroke')
    stroke.Color = Color3.fromRGB(60, 100, 180)
    stroke.Thickness = 0.8
    stroke.Transparency = 0.6
    stroke.Parent = btn


    local hoverTween = TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Quart), {BackgroundColor3 = Color3.fromRGB(35, 35, 55)})
    local normalTween = TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Quart), {BackgroundColor3 = Color3.fromRGB(22, 22, 35)})


    btn.MouseEnter:Connect(function() hoverTween:Play() end)
    btn.MouseLeave:Connect(function() normalTween:Play() end)


    return btn
end


-- =========================
-- SISTEMA DE TIMES / INIMIGOS
-- =========================


local function isEnemy(plr)
    if not plr or plr == LocalPlayer then return false end
    if not plr.Team or not LocalPlayer.Team then
        return true
    end
    return plr.Team ~= LocalPlayer.Team
end


-- =========================
-- VARI√ÅVEIS DE AIM / FOV
-- =========================


local AimbotActive = false
local aimbotHotkey = nil
local AimbotSmooth = 0.04
local AimbotFOV = 80
local aimbotMode = 'legit'
local aimbotKeyMode = nil


local AimAssistActive = false
local aimAssistHotkey = nil
local AimAssistStrength = 0.04
local AimAssistFOV = 90
local aimAssistKeyMode = nil


-- WALL STICK VARIABLE
local WallStickEnabled = false


-- HITBOX SELECTOR (HEAD / UPPERTORSO)
local hitboxOptions = {"Head", "UpperTorso"}
local hitboxIndex = 1


local function getCurrentHitbox()
    return hitboxOptions[hitboxIndex]
end


local function getTargetPartFromCharacter(char)
    if not char then return nil end
    local name = getCurrentHitbox()


    local part = char:FindFirstChild(name)
    if part then return part end


    return char:FindFirstChild("Head")
        or char:FindFirstChild("UpperTorso")
        or char:FindFirstChild("HumanoidRootPart")
end


-- FOV CIRCLE
local ShowFOV = false
local FOVCircle = Drawing.new("Circle")
FOVCircle.Visible = false
FOVCircle.Radius = AimbotFOV
FOVCircle.Thickness = 2
FOVCircle.Filled = false
FOVCircle.Color = Color3.fromRGB(80, 120, 220)
FOVCircle.Transparency = 0.8
FOVCircle.NumSides = 100


local ESPEnabled = false
local espBoxes = {}
local espColor = Color3.fromRGB(0, 100, 255)


local SuperJumpEnabled = false
local defaultJump = 50


local SpeedEnabled = false
local defaultWalk = 16


local WallHackEnabled = false
local wallParts = {}


local ClickRageEnabled = false


local FlyEnabled = false
local FlySpeed = 33
local FlyBodyVel = nil
local FlyBodyGyro = nil


local worldRgbActive = false
local worldRgbHue = 0
local betterGraphicsEnabled = false
local betterGraphicsEffects = {}


-- EXPANS√ÉO DE SUB-BOT√ïES
local aimbotExpanded = false
local aimAssistExpanded = false
local espExpanded = false


-- =========================
-- VISIBILIDADE
-- =========================


local function isVisible(targetHRP)
    if not targetHRP then return false end
    local cam = workspace.CurrentCamera
    local origin = cam.CFrame.Position
    local direction = (targetHRP.Position - origin).Unit * 1000
    local params = RaycastParams.new()
    params.FilterType = Enum.RaycastFilterType.Blacklist
    params.FilterDescendantsInstances = {LocalPlayer.Character}
    params.IgnoreWater = true


    local result = workspace:Raycast(origin, direction, params)
    if result and result.Instance then
        return result.Instance:IsDescendantOf(targetHRP.Parent)
    end
    return true
end


-- =========================
-- ALVO MAIS PR√ìXIMO DA MIRA
-- =========================


local function getClosestEnemyWithFOV(fovRadius)
    local camera = workspace.CurrentCamera
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)


    local closestDist = math.huge
    local target = nil


    for _, plr in ipairs(Players:GetPlayers()) do
        if isEnemy(plr) and plr.Character and plr.Character:FindFirstChild('HumanoidRootPart') then
            local char = plr.Character
            local head = char:FindFirstChild("Head") or char:FindFirstChild("HumanoidRootPart")
            local hrp = char:FindFirstChild("HumanoidRootPart")


            if head and hrp then
                local pos, onScreen = camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local screenPos = Vector2.new(pos.X, pos.Y)
                    local dist = (mousePos - screenPos).Magnitude
                    if dist <= fovRadius and dist < closestDist then
                        if WallStickEnabled or isVisible(hrp) then
                            closestDist = dist
                            target = plr
                        end
                    end
                end
            end
        end
    end


    return target
end


local function getClosestEnemyForClickRage()
    local biggestFOV = 1000
    local closestDist = math.huge
    local target = nil
    local camera = workspace.CurrentCamera
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)


    for _, plr in ipairs(Players:GetPlayers()) do
        if isEnemy(plr) and plr.Character and plr.Character:FindFirstChild('Head') then
            local headPos = plr.Character.Head.Position
            local screenPos, onScreen = camera:WorldToViewportPoint(headPos)
            if onScreen then
                local screenPosition = Vector2.new(screenPos.X, screenPos.Y)
                local dist = (mousePos - screenPosition).Magnitude
                if dist < biggestFOV and dist < closestDist then
                    if isVisible(plr.Character.HumanoidRootPart) then
                        closestDist = dist
                        target = plr
                    end
                end
            end
        end
    end


    return target
end


-- =========================
-- HOTKEY SYSTEM
-- =========================


local captureMode = nil
local choosingKeyStyle = false


local function keyName(k)
    if not k then return "CLIQUE UMA TECLA" end
    return k.Name
end


local function getAimbotStatusText()
    if not aimbotKeyMode then return 'üéØ AIMBOT - CLIQUE PARA CONFIG' end
    local modeText = (aimbotKeyMode == 1 and "ON/OFF" or "HOLD")
    local stateText
    if aimbotKeyMode == 2 then
        stateText = AimbotActive and "HOLD" or "OFF"
    else
        stateText = AimbotActive and "ON" or "OFF"
    end
    return 'üéØ AIMBOT [' .. keyName(aimbotHotkey) .. ' | ' .. modeText .. '] - ' .. stateText
end


local function getAimAssistStatusText()
    if not aimAssistKeyMode then return 'üéØ AIM ASSIST - CLIQUE PARA CONFIG' end
    local modeText = (aimAssistKeyMode == 1 and "ON/OFF" or "HOLD")
    local stateText
    if aimAssistKeyMode == 2 then
        stateText = AimAssistActive and "HOLD" or "OFF"
    else
        stateText = AimAssistActive and "ON" or "OFF"
    end
    return 'üéØ AIM ASSIST [' .. keyName(aimAssistHotkey) .. ' | ' .. modeText .. '] - ' .. stateText
end


-- SUB-BOT√ïES AIMBOT (CRIADOS ANTES DOS BOT√ïES PRINCIPAIS)
local rageBtn = createSubButton(pageCombat, '‚ö° RAGE', 2)
local semiRageBtn = createSubButton(pageCombat, 'üî• SEMI-RAGE', 3)
local smoothBtn = createSubButton(pageCombat, '‚ú® SMOOTH', 4)
local legitBtn = createSubButton(pageCombat, '‚úÖ LEGIT', 5)
local showFovBtn = createSubButton(pageCombat, 'üéØ SHOW FOV - OFF', 5.5)
local wallStickBtn = createSubButton(pageCombat, 'üîó WALL STICK - OFF', 5.7)


local aimbotBtn = createModernButton(pageCombat, getAimbotStatusText(), 1)
local aimAssistBtn = createModernButton(pageCombat, getAimAssistStatusText(), 6)


local function updateAimbotButtonText()
    aimbotBtn.Text = aimbotExpanded and 'üéØ AIMBOT ‚ñ≤' or getAimbotStatusText()
end

local function updateAimAssistButtonText()
    aimAssistBtn.Text = aimAssistExpanded and 'üéØ AIM ASSIST ‚ñ≤' or getAimAssistStatusText()
end


aimbotBtn.MouseButton1Click:Connect(function()
    if not aimbotHotkey or not aimbotKeyMode then
        captureMode = "aimbot"
        choosingKeyStyle = true
        aimbotBtn.Text = 'üéØ AIMBOT [1 = ON/OFF | 2 = HOLD]'
    else
        aimbotExpanded = not aimbotExpanded
        rageBtn.Visible = aimbotExpanded
        semiRageBtn.Visible = aimbotExpanded
        smoothBtn.Visible = aimbotExpanded
        legitBtn.Visible = aimbotExpanded
        showFovBtn.Visible = aimbotExpanded
        wallStickBtn.Visible = aimbotExpanded
        updateAimbotButtonText()
    end
end)


aimAssistBtn.MouseButton1Click:Connect(function()
    if not aimAssistHotkey or not aimAssistKeyMode then
        captureMode = "assist"
        choosingKeyStyle = true
        aimAssistBtn.Text = 'üéØ AIM ASSIST [1 = ON/OFF | 2 = HOLD]'
    else
        aimAssistExpanded = not aimAssistExpanded
        updateAimAssistButtonText()
    end
end)


local function isKeyUsed(newKey, owner)
    if not newKey then return false end
    if owner == "aimbot" and aimAssistHotkey == newKey then
        return true
    end
    if owner == "assist" and aimbotHotkey == newKey then
        return true
    end
    return false
end


UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.UserInputType ~= Enum.UserInputType.Keyboard then return end


    if choosingKeyStyle and captureMode then
        local kc = input.KeyCode
        local chose = false


        if kc == Enum.KeyCode.One or kc == Enum.KeyCode.KeypadOne then
            if captureMode == "aimbot" then
                aimbotKeyMode = 1
                aimbotBtn.Text = 'üéØ AIMBOT [AGUARDANDO TECLA...]'
            else
                aimAssistKeyMode = 1
                aimAssistBtn.Text = 'üéØ AIM ASSIST [AGUARDANDO TECLA...]'
            end
            chose = true
        elseif kc == Enum.KeyCode.Two or kc == Enum.KeyCode.KeypadTwo then
            if captureMode == "aimbot" then
                aimbotKeyMode = 2
                aimbotBtn.Text = 'üéØ AIMBOT [AGUARDANDO TECLA...]'
            else
                aimAssistKeyMode = 2
                aimAssistBtn.Text = 'üéØ AIM ASSIST [AGUARDANDO TECLA...]'
            end
            chose = true
        end


        if chose then
            choosingKeyStyle = false
        else
            if captureMode == "aimbot" then
                aimbotBtn.Text = 'üéØ AIMBOT [PRESSIONE 1 (ON/OFF) OU 2 (HOLD)]'
            else
                aimAssistBtn.Text = 'üéØ AIM ASSIST [PRESSIONE 1 (ON/OFF) OU 2 (HOLD)]'
            end
        end
        return
    end


    if captureMode and not choosingKeyStyle then
        local newKey = input.KeyCode


        if isKeyUsed(newKey, captureMode) then
            if captureMode == "aimbot" then
                aimbotBtn.Text = 'üéØ AIMBOT [J√Å EM USO]'
                task.delay(0.8, function()
                    updateAimbotButtonText()
                end)
            else
                aimAssistBtn.Text = 'üéØ AIM ASSIST [J√Å EM USO]'
                task.delay(0.8, function()
                    updateAimAssistButtonText()
                end)
            end
            captureMode = nil
            return
        end


        if captureMode == "aimbot" then
            aimbotHotkey = newKey
            updateAimbotButtonText()
        else
            aimAssistHotkey = newKey
            updateAimAssistButtonText()
        end


        captureMode = nil
        return
    end


    if aimbotHotkey and input.KeyCode == aimbotHotkey then
        if aimbotKeyMode == 2 then
            AimbotActive = true
        else
            AimbotActive = not AimbotActive
        end
        updateAimbotButtonText()
    end


    if aimAssistHotkey and input.KeyCode == aimAssistHotkey then
        if aimAssistKeyMode == 2 then
            AimAssistActive = true
        else
            AimAssistActive = not AimAssistActive
        end
        updateAimAssistButtonText()
    end
end)


UIS.InputEnded:Connect(function(input, gp)
    if gp then return end
    if input.UserInputType ~= Enum.UserInputType.Keyboard then return end


    if aimbotHotkey and input.KeyCode == aimbotHotkey and aimbotKeyMode == 2 then
        AimbotActive = false
        updateAimbotButtonText()
    end


    if aimAssistHotkey and input.KeyCode == aimAssistHotkey and aimAssistKeyMode == 2 then
        AimAssistActive = false
        updateAimAssistButtonText()
    end
end)


-- =========================
-- MODOS AIMBOT
-- =========================


local function updateModeButtons()
    local normalColor = Color3.fromRGB(22, 22, 35)
    local activeColor = Color3.fromRGB(70, 150, 70)
    rageBtn.BackgroundColor3 = aimbotMode == 'rage' and activeColor or normalColor
    semiRageBtn.BackgroundColor3 = aimbotMode == 'semi' and activeColor or normalColor
    smoothBtn.BackgroundColor3 = aimbotMode == 'smooth' and activeColor or normalColor
    legitBtn.BackgroundColor3 = aimbotMode == 'legit' and activeColor or normalColor
end


rageBtn.MouseButton1Click:Connect(function()
    aimbotMode = 'rage'
    AimbotSmooth = 0.95
    AimbotFOV = 200
    FOVCircle.Radius = AimbotFOV
    updateModeButtons()
end)


semiRageBtn.MouseButton1Click:Connect(function()
    aimbotMode = 'semi'
    AimbotSmooth = 0.5
    AimbotFOV = 150
    FOVCircle.Radius = AimbotFOV
    updateModeButtons()
end)


smoothBtn.MouseButton1Click:Connect(function()
    aimbotMode = 'smooth'
    AimbotSmooth = 0.08
    AimbotFOV = 100
    FOVCircle.Radius = AimbotFOV
    updateModeButtons()
end)


legitBtn.MouseButton1Click:Connect(function()
    aimbotMode = 'legit'
    AimbotSmooth = 0.04
    AimbotFOV = 80
    FOVCircle.Radius = AimbotFOV
    updateModeButtons()
end)


updateModeButtons()


-- SHOW FOV SUB-BOT√ÉO
showFovBtn.MouseButton1Click:Connect(function()
    ShowFOV = not ShowFOV
    showFovBtn.Text = 'üéØ SHOW FOV - ' .. (ShowFOV and 'ON' or 'OFF')
    FOVCircle.Visible = ShowFOV
end)


-- WALL STICK SUB-BOT√ÉO
wallStickBtn.MouseButton1Click:Connect(function()
    WallStickEnabled = not WallStickEnabled
    wallStickBtn.Text = 'üîó WALL STICK - ' .. (WallStickEnabled and 'ON' or 'OFF')
    local normalColor = Color3.fromRGB(22, 22, 35)
    local activeColor = Color3.fromRGB(70, 150, 70)
    wallStickBtn.BackgroundColor3 = WallStickEnabled and activeColor or normalColor
end)


-- BOT√ÉO: SELETOR DE HITBOX (HEAD / UPPERTORSO)
local function getHitboxText()
    return "üéØ HITBOX: " .. string.upper(getCurrentHitbox())
end


local hitboxBtn = createModernButton(pageCombat, getHitboxText(), 7)
hitboxBtn.MouseButton1Click:Connect(function()
    hitboxIndex = hitboxIndex + 1
    if hitboxIndex > #hitboxOptions then
        hitboxIndex = 1
    end
    hitboxBtn.Text = getHitboxText()
end)


-- =========================
-- LOOP AIMBOT / AIM ASSIST + FOV
-- =========================


RunService.RenderStepped:Connect(function()
    if FOVCircle then
        local mouseLocation = UIS:GetMouseLocation()
        FOVCircle.Position = Vector2.new(mouseLocation.X, mouseLocation.Y)
        FOVCircle.Radius = AimbotFOV
        FOVCircle.Visible = ShowFOV
    end


    if AimbotActive then
        local target = getClosestEnemyWithFOV(AimbotFOV)
        if target and target.Character then
            local char = target.Character
            local targetPart = getTargetPartFromCharacter(char)
            if targetPart then
                local cam = workspace.CurrentCamera
                local from = cam.CFrame
                local to = CFrame.new(cam.CFrame.Position, targetPart.Position)
                cam.CFrame = from:Lerp(to, AimbotSmooth)
            end
        end
    end


    if AimAssistActive then
        local target = getClosestEnemyWithFOV(AimAssistFOV)
        if target and target.Character then
            local char = target.Character
            local targetPart = getTargetPartFromCharacter(char)
            if targetPart then
                local cam = workspace.CurrentCamera
                local from = cam.CFrame
                local to = CFrame.new(cam.CFrame.Position, targetPart.Position)
                cam.CFrame = from:Lerp(to, AimAssistStrength * 0.3)
            end
        end
    end
end)


-- =========================
-- VISUAL / ESP / ETC
-- =========================


local function clearESP()
    for _, b in ipairs(espBoxes) do
        if b and b.Parent then b:Destroy() end
    end
    espBoxes = {}
end


local function createESPForPlayer(plr)
    if plr.Character and plr.Character:FindFirstChild('HumanoidRootPart') and isEnemy(plr) then
        local box = Instance.new('BoxHandleAdornment')
        box.Size = Vector3.new(4, 6, 2)
        box.Color3 = espColor
        box.Transparency = 0.5
        box.ZIndex = 10
        box.AlwaysOnTop = true
        box.Adornee = plr.Character.HumanoidRootPart
        box.Parent = workspace
        table.insert(espBoxes, box)
    end
end


local function updateESPVisuals()
    clearESP()
    if ESPEnabled then
        for _, plr in ipairs(Players:GetPlayers()) do
            if isEnemy(plr) then
                createESPForPlayer(plr)
            end
        end
    end
end


-- SUB-BOT√ïES ESP (CORES) - DEBAIXO DO BOT√ÉO ESP
local espBtn = createModernButton(pageVisual, 'üëÅÔ∏è ESP ENEMIES - OFF', 1)


local espBlueBtn = createSubButton(pageVisual, 'üîµ COR AZUL', 1.1)
local espRedBtn = createSubButton(pageVisual, 'üî¥ COR VERMELHA', 1.2)
local espYellowBtn = createSubButton(pageVisual, 'üü° COR AMARELA', 1.3)


espBtn.MouseButton1Click:Connect(function()
    ESPEnabled = not ESPEnabled
    espBtn.Text = 'üëÅÔ∏è ESP ENEMIES - ' .. (ESPEnabled and 'ON' or 'OFF')
    
    if not ESPEnabled then
        espExpanded = false
        espBlueBtn.Visible = false
        espRedBtn.Visible = false
        espYellowBtn.Visible = false
        clearESP()
    else
        espExpanded = true
        espBlueBtn.Visible = true
        espRedBtn.Visible = true
        espYellowBtn.Visible = true
        espColor = Color3.fromRGB(0, 100, 255)
        espBlueBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
        espRedBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
        espYellowBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
        updateESPVisuals()
    end
end)


espBlueBtn.MouseButton1Click:Connect(function()
    espColor = Color3.fromRGB(0, 100, 255)
    espBlueBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
    espRedBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    espYellowBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    updateESPVisuals()
end)


espRedBtn.MouseButton1Click:Connect(function()
    espColor = Color3.fromRGB(255, 0, 0)
    espRedBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
    espBlueBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    espYellowBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    updateESPVisuals()
end)


espYellowBtn.MouseButton1Click:Connect(function()
    espColor = Color3.fromRGB(255, 255, 0)
    espYellowBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
    espBlueBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    espRedBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 35)
    updateESPVisuals()
end)


local wallBtn = createModernButton(pageVisual, 'üß± WALL HACK - OFF', 2)
wallBtn.MouseButton1Click:Connect(function()
    WallHackEnabled = not WallHackEnabled
    wallBtn.Text = 'üß± WALL HACK - ' .. (WallHackEnabled and 'ON' or 'OFF')


    for _, p in ipairs(wallParts) do
        if p.part and p.part.Parent then
            p.part.LocalTransparencyModifier = p.old or 0
        end
    end
    wallParts = {}


    if WallHackEnabled then
        for _, part in ipairs(workspace:GetDescendants()) do
            if part:IsA('BasePart') and part.Transparency < 1 then
                table.insert(wallParts, {part = part, old = part.LocalTransparencyModifier})
                part.LocalTransparencyModifier = 0.7
            end
        end
    end
end)


local nightModeBtn = createModernButton(pageVisual, 'üåô NIGHT MODE - OFF', 3)
local originalClockTime = 14


nightModeBtn.MouseButton1Click:Connect(function()
    local lighting = game:GetService('Lighting')
    if lighting.ClockTime == 0 then
        lighting.ClockTime = originalClockTime
        nightModeBtn.Text = 'üåô NIGHT MODE - OFF'
    else
        originalClockTime = lighting.ClockTime
        lighting.ClockTime = 0
        nightModeBtn.Text = 'üåô NIGHT MODE - ON'
    end
end)


local worldRgbBtn = createModernButton(pageVisual, 'üåç WORLD RGB - OFF', 4)
worldRgbBtn.MouseButton1Click:Connect(function()
    worldRgbActive = not worldRgbActive
    worldRgbBtn.Text = 'üåç WORLD RGB - ' .. (worldRgbActive and 'ON' or 'OFF')
    if not worldRgbActive then
        local terrain = workspace.Terrain
        terrain.WaterColor = Color3.fromRGB(0, 85, 127)
        terrain.WaterTransparency = 0
        terrain.WaterReflectance = 0
    end
end)


local function applyBetterGraphics(state)
    local lighting = game:GetService("Lighting")


    for _, inst in ipairs(betterGraphicsEffects) do
        if inst and inst.Parent then
            inst:Destroy()
        end
    end
    betterGraphicsEffects = {}


    if not state then
        lighting.Brightness = 2
        lighting.ExposureCompensation = 0
        lighting.Ambient = Color3.fromRGB(127, 127, 127)
        lighting.OutdoorAmbient = Color3.fromRGB(127, 127, 127)
        lighting.EnvironmentDiffuseScale = 0.5
        lighting.EnvironmentSpecularScale = 0.5
        return
    end


    lighting.Brightness = 4
    lighting.ExposureCompensation = 0.3
    lighting.Ambient = Color3.fromRGB(40, 40, 40)
    lighting.OutdoorAmbient = Color3.fromRGB(80, 80, 80)
    lighting.EnvironmentDiffuseScale = 0.9
    lighting.EnvironmentSpecularScale = 0.9
    lighting.GlobalShadows = true


    local cc = Instance.new("ColorCorrectionEffect")
    cc.Name = "LKz_ColorCorrection"
    cc.Brightness = 0.08
    cc.Contrast = 0.35
    cc.Saturation = 0.35
    cc.TintColor = Color3.fromRGB(255, 235, 210)
    cc.Parent = lighting
    table.insert(betterGraphicsEffects, cc)


    local bloom = Instance.new("BloomEffect")
    bloom.Name = "LKz_Bloom"
    bloom.Intensity = 0.3
    bloom.Size = 40
    bloom.Threshold = 0.9
    bloom.Parent = lighting
    table.insert(betterGraphicsEffects, bloom)


    local sun = Instance.new("SunRaysEffect")
    sun.Name = "LKz_SunRays"
    sun.Intensity = 0.15
    sun.Spread = 0.8
    sun.Parent = lighting
    table.insert(betterGraphicsEffects, sun)


    local dof = Instance.new("DepthOfFieldEffect")
    dof.Name = "LKz_DOF"
    dof.FarIntensity = 0.03
    dof.NearIntensity = 0.15
    dof.InFocusRadius = 25
    dof.FocusDistance = 40
    dof.Parent = lighting
    table.insert(betterGraphicsEffects, dof)
end


local betterGraphicsBtn = createModernButton(pageVisual, 'üéÆ BETTER GRAPHICS - OFF', 5)
betterGraphicsBtn.MouseButton1Click:Connect(function()
    betterGraphicsEnabled = not betterGraphicsEnabled
    betterGraphicsBtn.Text = 'üéÆ BETTER GRAPHICS - ' .. (betterGraphicsEnabled and 'ON' or 'OFF')
    applyBetterGraphics(betterGraphicsEnabled)
end)


RunService.RenderStepped:Connect(function()
    if worldRgbActive then
        worldRgbHue = (worldRgbHue + 0.01) % 1
        local lighting = game:GetService('Lighting')
        lighting.Ambient = Color3.fromHSV(worldRgbHue, 0.7, 0.9)
        lighting.OutdoorAmbient = Color3.fromHSV(worldRgbHue, 0.6, 0.8)
        local terrain = workspace.Terrain
        terrain.WaterColor = Color3.fromHSV(worldRgbHue, 0.8, 0.7)
    end
end)


Players.PlayerAdded:Connect(function(plr)
    if ESPEnabled and isEnemy(plr) then
        createESPForPlayer(plr)
    end
end)


Players.PlayerRemoving:Connect(function(plr)
    if ESPEnabled then
        clearESP()
        for _, other in ipairs(Players:GetPlayers()) do
            if isEnemy(other) then
                createESPForPlayer(other)
            end
        end
    end
end)


-- =========================
-- MISC: JUMP, SPEED, FLY
-- =========================


local superJumpBtn = createModernButton(pageMisc, 'üöÄ SUPER JUMP - OFF', 1)
superJumpBtn.MouseButton1Click:Connect(function()
    SuperJumpEnabled = not SuperJumpEnabled
    superJumpBtn.Text = 'üöÄ SUPER JUMP - ' .. (SuperJumpEnabled and 'ON' or 'OFF')
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = char:WaitForChild('Humanoid')
    if SuperJumpEnabled then
        defaultJump = hum.JumpPower
        hum.JumpPower = 150
    else
        hum.JumpPower = defaultJump
    end
end)


local speedBtn = createModernButton(pageMisc, '‚ö° SPEED - OFF', 2)
speedBtn.MouseButton1Click:Connect(function()
    SpeedEnabled = not SpeedEnabled
    speedBtn.Text = '‚ö° SPEED - ' .. (SpeedEnabled and 'ON' or 'OFF')
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = char:WaitForChild('Humanoid')
    if SpeedEnabled then
        defaultWalk = hum.WalkSpeed
        hum.WalkSpeed = 50
    else
        hum.WalkSpeed = defaultWalk
    end
end)


local flyBtn = createModernButton(pageMisc, '‚úàÔ∏è FLY - OFF', 3)
flyBtn.MouseButton1Click:Connect(function()
    FlyEnabled = not FlyEnabled
    flyBtn.Text = '‚úàÔ∏è FLY - ' .. (FlyEnabled and 'ON' or 'OFF')


    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = char:WaitForChild('Humanoid')
    local root = char:WaitForChild('HumanoidRootPart')


    if FlyEnabled then
        hum.PlatformStand = true
        FlyBodyVel = Instance.new('BodyVelocity')
        FlyBodyVel.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        FlyBodyVel.Velocity = Vector3.new(0, 0, 0)
        FlyBodyVel.Parent = root


        FlyBodyGyro = Instance.new('BodyGyro')
        FlyBodyGyro.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
        FlyBodyGyro.P = 1e4
        FlyBodyGyro.CFrame = workspace.CurrentCamera.CFrame
        FlyBodyGyro.Parent = root
    else
        hum.PlatformStand = false
        if FlyBodyVel then FlyBodyVel:Destroy() FlyBodyVel = nil end
        if FlyBodyGyro then FlyBodyGyro:Destroy() FlyBodyGyro = nil end
    end
end)


RunService.RenderStepped:Connect(function()
    if FlyEnabled and FlyBodyVel and FlyBodyGyro then
        local cam = workspace.CurrentCamera
        local moveDir = Vector3.new(0, 0, 0)


        if UIS:IsKeyDown(Enum.KeyCode.W) then
            moveDir = moveDir + cam.CFrame.LookVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.S) then
            moveDir = moveDir - cam.CFrame.LookVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.A) then
            moveDir = moveDir - cam.CFrame.RightVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.D) then
            moveDir = moveDir + cam.CFrame.RightVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then
            moveDir = moveDir + Vector3.new(0, 1, 0)
        end
        if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then
            moveDir = moveDir - Vector3.new(0, 1, 0)
        end


        if moveDir.Magnitude > 0 then
            moveDir = moveDir.Unit * FlySpeed
        end


        FlyBodyVel.Velocity = moveDir
        FlyBodyGyro.CFrame = cam.CFrame
    end
end)


-- =========================
-- CLICK RAGE
-- =========================


local clickRageBtn = createModernButton(pageClickRage, 'üî´ CLICK RAGE - OFF', 1)
ClickRageEnabled = false


clickRageBtn.MouseButton1Click:Connect(function()
    ClickRageEnabled = not ClickRageEnabled
    clickRageBtn.Text = 'üî´ CLICK RAGE - ' .. (ClickRageEnabled and 'ON' or 'OFF')
end)


Mouse.Button1Down:Connect(function()
    if not ClickRageEnabled then return end
    local target = getClosestEnemyForClickRage()
    if not target or not target.Character then return end
    local head = target.Character:FindFirstChild('Head')
    if not head then return end
    local cam = workspace.CurrentCamera
    cam.CFrame = CFrame.new(cam.CFrame.Position, head.Position)
end)
